<div class="clients-container">
  <!-- Sección de Cabecera -->
  <div class="section-header">
    <h1 class="section-title">Gestión de Clientes</h1>
    
    <div class="header-actions">
      <!-- Barra de búsqueda -->
      <div class="search-box">
        <i class="material-icons search-icon">search</i>
        <input type="text" [(ngModel)]="searchTerm" placeholder="Buscar cliente..." class="search-input">
      </div>

      <!-- Selector de estado -->
      <select [(ngModel)]="filterStatus" class="search-input">
        <option [ngValue]="'all'">Todos los Estados</option>
        <option [ngValue]="true">Activo</option>
        <option [ngValue]="false">Inactivo</option>
      </select>

      <!-- Botón para exportar a PDF (Visible solo para administradores) -->
      <button class="btn btn-secondary btn-with-icon" (click)="exportPdf()" *ngIf="isAdmin">
        <i class="material-icons">picture_as_pdf</i>
        <span>Exportar PDF</span>
      </button>
    
      <!-- Botón para añadir cliente (Visible solo para administradores) -->
      <button class="btn btn-primary" (click)="addNewClient()" *ngIf="isAdmin">
        <i class="material-icons">add</i> Nuevo Cliente
      </button>
    </div>
  </div>

  <!-- Contenedor de la cuadrícula de clientes -->
  <div class="clients-grid">
    <div *ngIf="isLoading" class="loading-message card">
      <p>Cargando clientes...</p>
    </div>

    <!-- El contenedor `clients-grid` ahora envuelve directamente las tarjetas -->
    <div *ngFor="let client of filteredClients" class="client-card" [routerLink]="['/clients', client.id]">
      <div class="card-header">
        <h3 class="client-name">{{ client.nombre }}</h3>
        <span class="client-status" [ngClass]="getStatusClass(client.estatus)">
          {{ getStatusText(client.estatus) }}
        </span>
      </div>
      
      <div class="client-data">
        <i class="material-icons small-icon">badge</i>
        RFC: {{ client.rfc }}
      </div>
      
      <div class="client-data">
        <i class="material-icons small-icon">place</i>
        Dirección: {{ client.direccion }}
      </div>

      <div class="client-data">
        <i class="material-icons small-icon">phone</i>
        Teléfono: {{ client.telefono || 'N/A' }}
      </div>
      
      <div class="card-footer">
        <a class="btn-text" [routerLink]="['/clients', client.id]">Ver Detalles</a>
      </div>
    </div>

    <div *ngIf="!isLoading && filteredClients.length === 0" class="no-results-message">
      <p>No se encontraron clientes que coincidan con la búsqueda.</p>
      <button *ngIf="searchTerm || filterStatus !== 'all'" class="btn btn-secondary" (click)="searchTerm = ''; filterStatus = 'all'">Limpiar Filtros</button>
    </div>
  </div>
</div>